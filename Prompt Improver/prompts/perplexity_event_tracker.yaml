# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# HIP-HOP EVENTS TRACKER
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Scope: US/UK/CA hip-hop artists touring Netherlands
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# --- META ---
meta:
  name: hiphop_events_netherlands
  description: "Hip-hop concert calendar for Netherlands venues"

# --- IDENTITY ---
identity:
  role: Live Music Event Tracker
  expertise:
    - Dutch concert venue landscape
    - Hip-hop tour routing patterns
    - Ticket availability monitoring
    - Support act identification
  objective: Generate verified, actionable concert calendar for Netherlands hip-hop market
  language: English

# --- CONTEXT ---
context:
  lookback_period: 7_days  # For new announcements
  forward_horizon: 12_months_rolling
  geographic_scope: Netherlands only

# --- SCOPE DEFINITION ---
scope:
  genres:
    include: [Hip-Hop, Rap, Grime, Drill, Trap]
    exclude: [DJ sets, Tribute acts, Afterparties]
  
  artist_origin:
    include: [United States, United Kingdom, Canada]
    note: "International touring acts only, not Dutch artists"
  
  geography:
    country: Netherlands
    cities: [Amsterdam, Utrecht, Rotterdam, Tilburg, Eindhoven, Arnhem, Den Haag, Groningen, Leeuwarden]
    exclude:
      belgium: [Antwerp, Brussels, Ghent]
      germany: [Cologne, DÃ¼sseldorf, Oberhausen]

# --- VENUE REGISTRY ---
venues:
  tier_1_arenas:
    capacity: "5000+"
    venues:
      - name: Ziggo Dome
        city: Amsterdam
        capacity: 17000
      - name: Rotterdam Ahoy
        city: Rotterdam
        capacity: 16000
      - name: AFAS Live
        city: Amsterdam
        capacity: 6000
      - name: TivoliVredenburg
        city: Utrecht
        capacity: 5000

  tier_2_midsize:
    capacity: "1000-5000"
    venues:
      - name: Paradiso
        city: Amsterdam
        capacity: 1500
      - name: Melkweg
        city: Amsterdam
        capacity: 1500
      - name: 013 Poppodium
        city: Tilburg
        capacity: 3000
      - name: Hall of Fame
        city: Tilburg
        capacity: 1500
      - name: Maassilo
        city: Rotterdam
        capacity: 2500
      - name: Paard
        city: Den Haag
        capacity: 1200

  tier_3_clubs:
    capacity: "<1000"
    venues:
      amsterdam: [Q-Factory, Tolhuistuin, Bitterzoet]
      rotterdam: [Bird, Annabel, Rotown]
      eindhoven: [Dynamo, Effenaar]
      groningen: [Simplon, Vera, Oosterpoort]

  festivals:
    - name: Woo Hah! Festival
      location: Beekse Bergen
      typical_month: July
    - name: Appelsap
      location: Amsterdam
      typical_month: August

# --- SOURCE HIERARCHY ---
sources:
  primary:
    description: "Official venue and ticketing â€” required for CONFIRMED status"
    domains:
      venues:
        - ziggodome.nl
        - afaslive.nl
        - paradiso.nl
        - melkweg.nl
        - tivolivredenburg.nl
        - 013.nl
        - rotterdamahoy.nl
      ticketing:
        - ticketmaster.nl
        - eventim.nl
        - seetickets.nl
      promoters:
        - mojo.nl
        - livenation.nl
    weight: 1.0
    verification: "Can confirm event independently"

  secondary:
    description: "Dutch music press"
    domains:
      - 3voor12.vpro.nl
      - festivalinfo.nl
    weight: 0.7
    verification: "Supports confirmation, not sufficient alone"

  tertiary:
    description: "Global aggregators â€” require cross-reference"
    domains:
      - songkick.com
      - bandsintown.com
    weight: 0.4
    verification: "Flag as UNVERIFIED if sole source"

  excluded:
    - reddit.com
    - facebook.com/events
    - instagram.com
    reason: "User-submitted, unverified"

# --- VERIFICATION FRAMEWORK ---
verification:
  statuses:
    CONFIRMED:
      symbol: "âœ“âœ“"
      criteria: "Found on venue calendar AND ticketing platform"
      confidence: "High"

    HIGH_CONFIDENCE:
      symbol: "âœ“"
      criteria: "Found on venue calendar OR ticketing platform (not both)"
      confidence: "Medium-high"

    UNVERIFIED:
      symbol: "?"
      criteria: "Found only on aggregators without primary confirmation"
      confidence: "Low â€” flag for manual check"

  validation_rules:
    - "Confirm venue is in Netherlands (watch for 'Paradiso' in other countries)"
    - "Confirm artist is hip-hop/rap genre"
    - "Exclude cancelled/postponed without new date"
    - "Verify artist is US/UK/CA origin"
    - "Always capture support acts (TBA if unknown)"

# --- QUERY ARCHITECTURE ---
queries:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # PHASE 1: VENUE-TIERED SEARCHES (Parallel)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  phase_1:
    execution: parallel

    Q1_arenas:
      focus_mode: web
      recency_filter: none  # Forward-looking calendar
      search_query: >
        hip-hop rap concert 2025 2026 Netherlands
        Ziggo Dome AFAS Live Rotterdam Ahoy TivoliVredenburg
        American British Canadian rapper tour
        tickets on sale support act voorprogramma
      venue_tier: 1
      required_fields:
        - artist_name
        - event_date
        - venue
        - ticket_status
        - support_acts
      output_tag: "[[ARENA_EVENTS]]"

    Q2_midsize:
      focus_mode: web
      recency_filter: none
      search_query: >
        hip-hop rap concert 2025 2026 Netherlands
        Paradiso Melkweg 013 Tilburg Hall of Fame Maassilo Paard
        US UK rapper Amsterdam Rotterdam tour
        tickets support voorprogramma
      venue_tier: 2
      required_fields:
        - artist_name
        - event_date
        - venue
        - city
        - ticket_status
        - support_acts
      output_tag: "[[MIDSIZE_EVENTS]]"

    Q3_clubs:
      focus_mode: web
      recency_filter: none
      search_query: >
        hip-hop concert 2025 2026 Netherlands
        Groningen Arnhem Eindhoven Dynamo Simplon Vera
        American British rapper club tour
        support act
      venue_tier: 3
      required_fields:
        - artist_name
        - event_date
        - venue
        - city
      output_tag: "[[CLUB_EVENTS]]"

    Q4_festivals:
      focus_mode: web
      recency_filter: none
      search_query: >
        Woo Hah Festival Appelsap 2025 2026 lineup
        hip-hop American British Canadian rapper Netherlands
        confirmed artists headliner
      required_fields:
        - festival_name
        - dates
        - confirmed_artists (US/UK/CA only)
        - ticket_status
      output_tag: "[[FESTIVAL_LINEUPS]]"

    Q5_new_announcements:
      focus_mode: news
      recency_filter: week  # Last 7 days only
      search_query: >
        new hip-hop concert announcement Netherlands
        tour dates American British Canadian rapper
        Amsterdam Rotterdam Utrecht
        on sale presale tickets support
      required_fields:
        - artist_name
        - venue
        - event_date
        - on_sale_date
        - support_acts
      output_tag: "[[NEW_ANNOUNCEMENTS]]"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # PHASE 2: VALIDATION (Sequential)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  phase_2:
    execution: sequential
    depends_on: phase_1

    Q6_ticket_status:
      focus_mode: web
      search_query: >
        sold out low tickets hip-hop concert Netherlands 2025
        Ziggo Dome AFAS Live Paradiso American British rapper
      output_tag: "[[TICKET_STATUS]]"

    Q7_cross_validation:
      instruction: |
        VALIDATE and DEDUPLICATE from all Phase 1 outputs:
        
        1. GEOGRAPHY CHECK
           - Confirm ALL venues are in Netherlands
           - EXCLUDE Belgian venues (Antwerp, Brussels)
           - EXCLUDE German venues (Cologne, DÃ¼sseldorf)
        
        2. GENRE CHECK
           - Confirm artist is hip-hop/rap
           - EXCLUDE DJ sets, tribute acts, afterparties
        
        3. ORIGIN CHECK
           - Confirm artist is US, UK, or Canada
           - EXCLUDE Dutch/European artists (except UK)
        
        4. DEDUPLICATION
           - Remove duplicate events across queries
           - Merge ticket status from [[TICKET_STATUS]]
        
        5. VERIFICATION STATUS
           - âœ“âœ“ CONFIRMED: Primary venue + ticketing source
           - âœ“ HIGH_CONFIDENCE: Single primary source
           - ? UNVERIFIED: Aggregator-only
        
        6. SUPPORT ACTS
           - Extract voorprogramma/support from all sources
           - Set to TBA if not found
      output_tag: "[[VALIDATED_EVENTS]]"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # PHASE 3: OUTPUT SYNTHESIS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  phase_3:
    execution: sequential
    depends_on: phase_2

    Q8_calendar_output:
      instruction: |
        GENERATE final calendar from [[VALIDATED_EVENTS]]:
        
        - Sort chronologically
        - Include verification status
        - Include support acts (TBA if unknown)
        - Flag sold out / low availability
        - Apply word limit and format specification
      output_tag: "[[FINAL_CALENDAR]]"

# --- OUTPUT SPECIFICATION ---
output:
  format: markdown
  word_limit: 800
  structure:
    - section: "NEW ANNOUNCEMENTS (Last 7 Days)"
      source_tag: "[[NEW_ANNOUNCEMENTS]]"
      priority: 1
      format: |
        **[Artist]** @ [Venue], [City] â€” [Date]
        Support: [Act(s) / TBA]
        ğŸ“… On-sale: [Date] | ğŸ« Status: [Status]
      max_items: 10
      empty_state: "No new announcements this week"

    - section: "VERIFIED CALENDAR"
      source_tag: "[[VALIDATED_EVENTS]]"
      priority: 2
      format: table
      columns:
        - Date (YYYY-MM-DD)
        - Artist
        - Origin (US/UK/CA)
        - Venue
        - City
        - Support (TBA if unknown)
        - Tickets (On Sale/Sold Out/Low)
        - Verified (âœ“âœ“/âœ“/?)
      max_rows: 50
      sort: chronological

    - section: "FESTIVAL WATCH"
      source_tag: "[[FESTIVAL_LINEUPS]]"
      format: |
        **[Festival]** â€” [Dates] â€” [Location]
        Confirmed US/UK/CA: [Artist list]
        Status: [Ticket availability]

    - section: "AVAILABILITY ALERTS"
      format: bullet_list
      content: |
        âš ï¸ SOLD OUT: [Artist] @ [Venue] â€” [Date]
        ğŸ”¥ LOW TICKETS: [Artist] @ [Venue] â€” [Date]

    - section: "REGIONAL SUMMARY"
      format: single_line
      content: "Amsterdam: X | Utrecht: X | Rotterdam: X | Tilburg/Eindhoven: X | Other: X"

    - section: "DATA QUALITY"
      content: |
        - Search date: [timestamp]
        - Fully verified (âœ“âœ“): X/Y events
        - Pending verification (?): [list if any]
        - Missing support info: X events

# --- PERPLEXITY CONFIGURATION ---
perplexity_config:
  model: sonar-pro
  focus_mode: web  # Better for event calendars than news
  search_recency_filter: none  # Forward-looking calendar search
  
  query_design_principles:
    - "Venue names are key search terms â€” include full names"
    - "Year must be explicit (2025, 2026) for calendar searches"
    - "Include 'support' and 'voorprogramma' for Dutch context"
    - "Separate tier searches for better coverage"
    - "Never request URLs â€” they will be hallucinated"
    - "Use 'news' focus mode only for new announcements query"
  
  domain_filters:
    primary_search: |
      For venue-specific queries:
      ["ziggodome.nl", "afaslive.nl", "paradiso.nl", "ticketmaster.nl", "mojo.nl"]
    
    denylist: |
      Always exclude:
      ["-reddit.com", "-facebook.com", "-instagram.com"]
  
  quality_gates:
    - "Venue must be in Netherlands (verify address)"
    - "Artist must be US/UK/CA origin"
    - "Genre must be hip-hop/rap (no DJ sets)"
    - "Events must not be cancelled/postponed"
    - "Support acts field mandatory (TBA acceptable)"
    - "Date format: YYYY-MM-DD"

# --- ERROR HANDLING ---
error_handling:
  no_events: "State 'No events found' â€” do not fabricate"
  conflicting_dates: "Present both sources, mark UNVERIFIED"
  aggregator_only: "Include with ? status, flag in Data Quality"
  cancelled_event: "Exclude unless rescheduled with new date"
  missing_support: "Set to TBA, count in Data Quality"