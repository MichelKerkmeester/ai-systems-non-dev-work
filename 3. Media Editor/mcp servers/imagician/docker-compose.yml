version: "3.8"

services:
  imagician:
    build: .
    image: imagician:latest
    container_name: imagician
    volumes:
      # Map only the main images directory as specified
      - /Users/michelkerkmeester/MEGA/AI Systems/Media Editor/export/images:/images:rw

    environment:
      # Set working directory base
      - IMAGE_PATH=/images
      - NODE_ENV=production

    # Resource limits
    mem_limit: 2g
    cpus: 2

    # Keep container running
    stdin_open: true
    tty: true

    # Restart policy
    restart: unless-stopped
